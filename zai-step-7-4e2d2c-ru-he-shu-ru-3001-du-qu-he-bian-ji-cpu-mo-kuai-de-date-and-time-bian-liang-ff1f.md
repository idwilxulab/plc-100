为了输入或读取 CPU 时钟的日期和时间，S7-300/400需要数据类型 “DT” \(DATA\_AND\_TIME\) 。

表1给出了在 S7-300/400 中输入和输出日期和时间数据所需要的指令。这些指令参见 STEP 7 \(TIA Portal\) 中的"高级指令 &gt; 日期和时间"

| 指令 | 解释 |
| :--- | :--- |
| WR\_SYS\_T | 设定时间 |
| RD\_SYS\_T | 读取时间 |
| T\_CONV | 转换并提取时间 |
| T\_COMBINE | 合并时间 |

表1

在 S7-300/400 中使用 “T\_CONV” 指令从 "DT" 中提取日期、星期和时间数据。该指令需要调用三次。在参数 “IN” 中填写 “DT” 类型的变量并在参数 “OUT” 中分别填写定义为 “Date”， “Int” 和 “TOD” 类型的变量。可完成

1. 从 “DT”  转换到 “Date” （日期）
2. 从 “DT”  转换到 “Int”（星期）
3. 从 “DT”  转换到 “TOD” （当前时间）



